<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<table>
                                                                                <tbody>
                                                                                    <tr>
                                                                                        <td width="670px" style="position: relative;">

                                                                                            1、多个视图函数在patterns中的简洁写法：每一个视图对应一个patterns，在patterns中指定视图所在的位置<wbr><div><pre><p><span>from</span><span> django</span><span>.</span><span>conf</span><span>.</span><span>urls</span><span>.</span><span>defaults </span><span>import</span><span> </span><span>*</span><br><span>from</span><span> django</span><span>.</span><span>contrib </span><span>import</span><span> admin</span><br><span>admin</span><span>.</span><span>autodiscover</span><span>()</span><br><br><span>urlpatterns </span><span>=</span><span> patterns</span><span>(</span><span>'dapp1.views'</span><span>,</span><span> </span><span>#第一个参数指定视图所在的位置</span><br><span>    </span><span>(</span><span>r</span><span>'^hello/$'</span><span>,</span><span>'hello'</span><span>),</span><span>  </span><span>#引用视图中的hello函数，注意这里需要使用单引号</span><br><span>    </span><span>(</span><span>r</span><span>'^world/$'</span><span>,</span><span>'world'</span><span>),</span><span> </span><br><span>    </span><span>(</span><span>r</span><span>'^$'</span><span>,</span><span> </span><span>'home'</span><span>),</span><span>  </span><br><span>)</span></p><p><br><span>urlpatterns </span><span>+=</span><span> patterns</span><span>(</span><span>'contact.views'</span><span>,</span><span>  </span><span>#第二个视图，urlpatterns是个元组，满足可加性</span><br><span>    </span><span>(</span><span>r</span><span>'^contact/$'</span><span>,</span><span>'contact'</span><span>),</span><span>  </span><br><span>)</span></p></pre><br></div><div>2、传递额外参数到视图函数中（额外参数也称为关键字参数）</div><div><pre><pre><span style="font-family: Arial, Helvetica, sans-serif; line-height: 22px; white-space: normal;"><span># urls.py</span></span><br></pre><pre><span>from</span><span> django</span><span>.</span><span>conf</span><span>.</span><span>urls</span><span>.</span><span>defaults </span><span>import</span><span> </span><span>*</span><br><span>from</span><span> mysite </span><span>import</span><span> views</span><br><span>urlpatterns </span><span>=</span><span> patterns</span><span>(</span><span>''</span><span>,</span><br><span>    </span><span>(</span><span>r</span><span>'^foo/$'</span><span>,</span><span> views</span><span>.</span><span>foobar_view</span><span>,</span><span> </span><span>{</span><span>'template_name'</span><span>:</span><span> </span><span>'template1.html'</span><span>}),</span><span> </span><span>#不同路径对应同一个视图</span><br><span>    </span><span>(</span><span>r</span><span>'^bar/$'</span><span>,</span><span> views</span><span>.</span><span>foobar_view</span><span>,</span><span> </span><span>{</span><span>'template_name'</span><span>:</span><span> </span><span>'template2.html'</span><span>}),</span><span> </span><span>#但展现的模板不同</span><br><span>)</span></pre><pre><br><span># views.py</span><br><span>from</span><span> django</span><span>.</span><span>shortcuts </span><span>import</span><span> render_to_response</span><br><span>from</span><span> mysite</span><span>.</span><span>models </span><span>import</span><span> </span><span>MyModel</span><br><span>def</span><span> foobar_view</span><span>(</span><span>request</span><span>,</span><span> template_name</span><span>):</span><span>  </span><span># 捕获第二个参数</span></pre><pre><span>   m_list = MyModel.objects.filter(is_new=True)</span><br><span>   </span><span>return</span><span> render_to_response</span><span>(</span><span>template_name</span><span>,</span><span> </span><span>{</span><span>'m_list'</span><span>:</span><span> m_list</span><span>})</span></pre></pre>3、在url路径中给传递参数命名，在对应的视图函数中根据命名参数获取他的值（传递参数也称为位置参数）</div><div><pre><pre style="padding-top: 0.3em; padding-right: 0.4em; padding-bottom: 0.3em; padding-left: 0.4em; font-size: 12px; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(148, 218, 58); border-right-color: rgb(148, 218, 58); border-bottom-color: rgb(148, 218, 58); border-left-color: rgb(148, 218, 58); border-image: initial; border-top-width: 1px; border-right-width: 0px; border-bottom-width: 1px; border-left-width: 0px; overflow-x: hidden; overflow-y: hidden; width: 682px; font-family: Anonymous, Consolas, 'Courier New' !important; color: rgb(35, 79, 50); position: relative; line-height: 18px;"><span>/mydata/</span><span>jan</span><span>/</span><span>01</span><span>/</span><br><span>/</span><span>mydata</span><span>/</span><span>jan</span><span>/</span><span>02</span><span>/</span><br><span>/</span><span>mydata</span><span>/</span><span>jan</span><span>/</span><span>03</span><span>/</span><br><span># ...</span><br><span>/</span><span>mydata</span><span>/</span><span>dec</span><span>/</span><span>30</span><span>/</span><br><span>/</span><span>mydata</span><span>/</span><span>dec</span><span>/</span><span>31</span><span>/</span></pre><span>urls</span><span>.</span><span>py</span><br><pre style="padding-top: 0.3em; padding-right: 0.4em; padding-bottom: 0.3em; padding-left: 0.4em; font-size: 12px; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(148, 218, 58); border-right-color: rgb(148, 218, 58); border-bottom-color: rgb(148, 218, 58); border-left-color: rgb(148, 218, 58); border-image: initial; border-top-width: 1px; border-right-width: 0px; border-bottom-width: 1px; border-left-width: 0px; overflow-x: hidden; overflow-y: hidden; width: 682px; font-family: Anonymous, Consolas, 'Courier New' !important; color: rgb(35, 79, 50); position: relative; line-height: 18px;"><span>urlpatterns </span><span>=</span><span> patterns</span><span>(</span><span>''</span><span>,</span><br><span>    </span><span>(</span><span>r</span><span>'^mydata/(?P&lt;month&gt;\w{3})/(?P&lt;day&gt;\d\d)/$'</span><span>,</span><span> views</span><span>.</span><span>my_view</span><span>),</span><span>  </span><span>#在正则表达式前加上?&lt;name&gt;命名参数</span></pre><pre style="padding-top: 0.3em; padding-right: 0.4em; padding-bottom: 0.3em; padding-left: 0.4em; font-size: 12px; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(148, 218, 58); border-right-color: rgb(148, 218, 58); border-bottom-color: rgb(148, 218, 58); border-left-color: rgb(148, 218, 58); border-image: initial; border-top-width: 1px; border-right-width: 0px; border-bottom-width: 1px; border-left-width: 0px; overflow-x: hidden; overflow-y: hidden; width: 682px; font-family: Anonymous, Consolas, 'Courier New' !important; color: rgb(35, 79, 50); position: relative;"><br><table style="margin-top: auto; margin-right: auto; margin-bottom: auto; margin-left: auto; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 0px; border-left-width: 0px; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: rgb(238, 238, 238); color: rgb(0, 0, 0); font-family: Simsun; font-size: 16px; line-height: normal;" cellspacing="0"><tbody><tr><td style="border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 1px; border-left-width: 1px; border-top-color: gray; border-right-color: gray; border-bottom-color: gray; border-left-color: gray;"><span style="margin-top: 3px; margin-right: 3px; margin-bottom: 3px; margin-left: 3px; color: blue;"><span>(?&lt;</span><span>name</span><span>&gt;</span><span>exp</span><span>)</span></span></td><td style="border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 1px; border-left-width: 1px; border-top-color: gray; border-right-color: gray; border-bottom-color: gray; border-left-color: gray;"><span style="margin-top: 3px; margin-right: 3px; margin-bottom: 3px; margin-left: 3px; text-decoration: underline;"><span>匹配</span><span>exp</span><span>,并捕获文本到名称为</span><span>name</span><span>的组里，也可以写成(?</span><span>'name'</span><span>exp</span><span>)</span></span></td></tr></tbody></table><br><span style="line-height: 18px;"><span>)</span></span></pre><span>views</span><span>.</span><span>py</span><br><pre style="padding-top: 0.3em; padding-right: 0.4em; padding-bottom: 0.3em; padding-left: 0.4em; font-size: 12px; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(148, 218, 58); border-right-color: rgb(148, 218, 58); border-bottom-color: rgb(148, 218, 58); border-left-color: rgb(148, 218, 58); border-image: initial; border-top-width: 1px; border-right-width: 0px; border-bottom-width: 1px; border-left-width: 0px; overflow-x: hidden; overflow-y: hidden; width: 682px; font-family: Anonymous, Consolas, 'Courier New' !important; color: rgb(35, 79, 50); position: relative; line-height: 18px;"><span>def</span><span> my_view</span><span>(</span><span>request</span><span>,</span><span> month</span><span>,</span><span> day</span><span>):</span><br><span>    </span><span># ....</span></pre><br></pre>另外，根据url的提示，给定参数值，作为额外参数进行传递额</div><div><pre><pre style="padding-top: 0.3em; padding-right: 0.4em; padding-bottom: 0.3em; padding-left: 0.4em; font-size: 12px; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(148, 218, 58); border-right-color: rgb(148, 218, 58); border-bottom-color: rgb(148, 218, 58); border-left-color: rgb(148, 218, 58); border-image: initial; border-top-width: 1px; border-right-width: 0px; border-bottom-width: 1px; border-left-width: 0px; overflow-x: hidden; overflow-y: hidden; width: 682px; font-family: Anonymous, Consolas, 'Courier New' !important; color: rgb(35, 79, 50); position: relative; line-height: 18px;"><span>urlpatterns </span><span>=</span><span> patterns</span><span>(</span><span>''</span><span>,</span><br><span>    </span><span>(</span><span>r</span><span>'^mydata/birthday/$'</span><span>,</span><span> views</span><span>.</span><span>my_view</span><span>,</span><span> </span><span>{</span><span>'month'</span><span>:</span><span> </span><span>'jan'</span><span>,</span><span> </span><span>'day'</span><span>:</span><span> </span><span>'06'</span><span>}),</span><span>#</span><br><span>    </span><span>(</span><span>r</span><span>'^mydata/(?P&lt;month&gt;\w{3})/(?P&lt;day&gt;\d\d)/$'</span><span>,</span><span> views</span><span>.</span><span>my_view</span><span>),</span><br><span>)</span></pre></pre><pre style="line-height: 22px;"><span>views</span><span>.</span><span>py</span><br style="line-height: 22px;"><pre style="line-height: 18px; padding-top: 0.3em; padding-right: 0.4em; padding-bottom: 0.3em; padding-left: 0.4em; font-size: 12px; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(148, 218, 58); border-right-color: rgb(148, 218, 58); border-bottom-color: rgb(148, 218, 58); border-left-color: rgb(148, 218, 58); border-image: initial; border-top-width: 1px; border-right-width: 0px; border-bottom-width: 1px; border-left-width: 0px; overflow-x: hidden; overflow-y: hidden; width: 682px; font-family: Anonymous, Consolas, 'Courier New' !important; color: rgb(35, 79, 50); position: relative;"><span>def</span><span> my_view</span><span>(</span><span>request</span><span>,</span><span> month</span><span>,</span><span> day</span><span>):</span><br style="line-height: 19px;"><span>    </span><span># ....</span></pre></pre><span style="color: rgb(51, 51, 51); font-family: 'Microsoft YaHei', 'Lucida Grande', Verdana; line-height: 24px;">如果URLconf捕捉到的一个命名组变量和一个额外URLconf参数包含的变量同名时，额外URLconf参数的值会被使用。</span></div><div><pre><pre style="padding-top: 0.3em; padding-right: 0.4em; padding-bottom: 0.3em; padding-left: 0.4em; font-size: 12px; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(148, 218, 58); border-right-color: rgb(148, 218, 58); border-bottom-color: rgb(148, 218, 58); border-left-color: rgb(148, 218, 58); border-image: initial; border-top-width: 1px; border-right-width: 0px; border-bottom-width: 1px; border-left-width: 0px; overflow-x: hidden; overflow-y: hidden; width: 682px; font-family: Anonymous, Consolas, 'Courier New' !important; color: rgb(35, 79, 50); position: relative; line-height: 18px;"><span>urlpatterns </span><span>=</span><span> patterns</span><span>(</span><span>''</span><span>,</span><br><span>    </span><span>(</span><span>r</span><span>'^mydata/(?P&lt;id&gt;\d+)/$'</span><span>,</span><span> views</span><span>.</span><span>my_view</span><span>,</span><span> </span><span>{</span><span>'id'</span><span>:</span><span> </span><span>3</span><span>}),</span><br><span>)</span></pre></pre>4、当页面需要传递参数但实际上没有参数传递时，可以使用缺省视图的情况</div><div><pre><pre style="padding-top: 0.3em; padding-right: 0.4em; padding-bottom: 0.3em; padding-left: 0.4em; font-size: 12px; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(148, 218, 58); border-right-color: rgb(148, 218, 58); border-bottom-color: rgb(148, 218, 58); border-left-color: rgb(148, 218, 58); border-image: initial; border-top-width: 1px; border-right-width: 0px; border-bottom-width: 1px; border-left-width: 0px; overflow-x: hidden; overflow-y: hidden; width: 682px; font-family: Anonymous, Consolas, 'Courier New' !important; color: rgb(35, 79, 50); position: relative; line-height: 18px;"><span># urls.py</span><br><br><span>from</span><span> django</span><span>.</span><span>conf</span><span>.</span><span>urls</span><span>.</span><span>defaults </span><span>import</span><span> </span><span>*</span><br><span>from</span><span> mysite </span><span>import</span><span> views</span><br><br><span>urlpatterns </span><span>=</span><span> patterns</span><span>(</span><span>''</span><span>,</span><br><span>    </span><span>(</span><span>r</span><span>'^blog/$'</span><span>,</span><span> views</span><span>.</span><span>page</span><span>),</span><span>  </span><span>#</span><span style="color: rgb(51, 51, 51); font-family: 'Microsoft YaHei', 'Lucida Grande', Verdana; font-size: 14px; line-height: 24px; white-space: normal;"><span>URLconf中把特殊情况放在首位的处理</span></span><br><span>    </span><span>(</span><span>r</span><span>'^blog/page(?P&lt;num&gt;\d+)/$'</span><span>,</span><span> views</span><span>.</span><span>page</span><span>),</span><br><span>)</span><br><br><span># views.py</span><br><br><span>def</span><span> page</span><span>(</span><span>request</span><span>,</span><span> num</span><span>=</span><span>'1'</span><span>):</span><br><span>    </span><span># Output the appropriate page of blog entries, according to num.</span><br><span>    </span><span># ...</span></pre></pre><p style="margin-top: 0.6em; margin-bottom: 1em; padding-bottom: 0.1em; line-height: 1.8 !important; color: rgb(51, 51, 51) !important; position: relative; font-family: 'Microsoft YaHei', 'Lucida Grande', Verdana;">在这里，两个URL表达式都指向了同一个视图&nbsp;<tt style="white-space: nowrap; color: rgb(35, 79, 50);"><span style="font-family: Consolas, 'Courier New' !important; font-size: 12px !important; font-weight: 800 !important; line-height: normal !important;">views.page</span></tt>&nbsp;，但是第一个表达式没有传递任何参数。 如果匹配到了第一个样式，&nbsp;<tt style="white-space: nowrap; color: rgb(35, 79, 50);"><span style="font-family: Consolas, 'Courier New' !important; font-size: 12px !important; font-weight: 800 !important; line-height: normal !important;">page()</span></tt>&nbsp;函数将会对参数&nbsp;<tt style="white-space: nowrap; color: rgb(35, 79, 50);"><span style="font-family: Consolas, 'Courier New' !important; font-size: 12px !important; font-weight: 800 !important; line-height: normal !important;">num</span></tt>&nbsp;使用默认值&nbsp;<tt style="white-space: nowrap; color: rgb(35, 79, 50);"><span style="font-family: Consolas, 'Courier New' !important; font-size: 12px !important; font-weight: 800 !important; line-height: normal !important;">"1"</span></tt>&nbsp;，如果第二个表达式匹配成功，&nbsp;<tt style="white-space: nowrap; color: rgb(35, 79, 50);"><span style="font-family: Consolas, 'Courier New' !important; font-size: 12px !important; font-weight: 800 !important; line-height: normal !important;">page()</span></tt>&nbsp;函数将使用正则表达式传递过来的num的值。<span style="line-height: 1.8;">（注：我们已经注意到设置默认参数值是字符串 `` ‘1’`` ，不是整数`` 1`` 。为了保持一致，因为捕捉给`` num`` 的值总是字符串。</span><span style="line-height: 24px;">每个被捕获的参数将被作为纯Python字符串来发送。</span></p><p style="margin-top: 0.6em; margin-bottom: 1em; padding-bottom: 0.1em; line-height: 1.8 !important; color: rgb(51, 51, 51) !important; position: relative; font-family: 'Microsoft YaHei', 'Lucida Grande', Verdana;"><span style="line-height: 1.8;">5、包含其他urls</span></p><pre><pre style="padding-top: 0.3em; padding-right: 0.4em; padding-bottom: 0.3em; padding-left: 0.4em; font-size: 12px; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(148, 218, 58); border-right-color: rgb(148, 218, 58); border-bottom-color: rgb(148, 218, 58); border-left-color: rgb(148, 218, 58); border-image: initial; border-top-width: 1px; border-right-width: 0px; border-bottom-width: 1px; border-left-width: 0px; overflow-x: hidden; overflow-y: hidden; width: 682px; font-family: Anonymous, Consolas, 'Courier New' !important; color: rgb(35, 79, 50); position: relative; line-height: 18px;"><span>from</span><span> django</span><span>.</span><span>conf</span><span>.</span><span>urls</span><span>.</span><span>defaults </span><span>import</span><span> </span><span>*</span><br><br><span>urlpatterns </span><span>=</span><span> patterns</span><span>(</span><span>''</span><span>,</span><br><span>    </span><span>(</span><span>r</span><span>'^weblog/'</span><span>,</span><span> include</span><span>(</span><span>'mysite.blog.urls'</span><span>)),</span><span> </span><span>#注意这里不使用$来匹配结束，因为路径后面的参数可能会被包含urls中的patterns匹配</span><br><span>    </span><span>(</span><span>r</span><span>'^photos/'</span><span>,</span><span> include</span><span>(</span><span>'mysite.photos.urls'</span><span>)),</span><br><span>    </span><span>(</span><span>r</span><span>'^about/$'</span><span>,</span><span> </span><span>'mysite.views.about'</span><span>),</span><br><span>)</span></pre></pre><span style="line-height: 24px;">一个被包含的URLconf接收任何来自parent URLconfs的被捕获的参数，</span><span style="line-height: 24px;">被捕获的&nbsp;</span><tt style="white-space: nowrap; color: rgb(35, 79, 50);"><span style="font-family: Consolas, 'Courier New' !important; font-size: 12px !important; font-weight: 800 !important; line-height: normal !important;">username</span></tt><span style="line-height: 24px;">&nbsp;变量将传递给被包含的 URLconf，进而传递给那个URLconf中的&nbsp;</span><em style="line-height: 24px;">每一个</em><span style="line-height: 24px;">&nbsp;视图函数。</span><pre><pre style="padding-top: 0.3em; padding-right: 0.4em; padding-bottom: 0.3em; padding-left: 0.4em; font-size: 12px; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(148, 218, 58); border-right-color: rgb(148, 218, 58); border-bottom-color: rgb(148, 218, 58); border-left-color: rgb(148, 218, 58); border-image: initial; border-top-width: 1px; border-right-width: 0px; border-bottom-width: 1px; border-left-width: 0px; overflow-x: hidden; overflow-y: hidden; width: 682px; font-family: Anonymous, Consolas, 'Courier New' !important; color: rgb(35, 79, 50); position: relative; line-height: 18px;"><span>urlpatterns </span><span>=</span><span> patterns</span><span>(</span><span>''</span><span>,</span><br><span>    </span><span>(</span><span>r</span><span>'^(?P&lt;username&gt;\w+)/blog/'</span><span>,</span><span> include</span><span>(</span><span>'foo.urls.blog'</span><span>)),</span><br><span>)</span></pre></pre>另外，<span style="line-height: 24px;">传递额外的URLconf选项到&nbsp;</span><tt style="white-space: nowrap; color: rgb(35, 79, 50);"><span style="font-family: Consolas, 'Courier New' !important; font-size: 12px !important; font-weight: 800 !important; line-height: normal !important;">include()</span></tt><span style="line-height: 24px;">&nbsp;, 就像你可以通过字典传递额外的URLconf选项到普通的视图。 当你这样做的时候，被包含URLconf的&nbsp;</span><em style="line-height: 24px;">每一</em><span style="line-height: 24px;">&nbsp;行都会收到那些额外的参数。<b>与捕获参数时等价的</b></span><pre><pre style="padding-top: 0.3em; padding-right: 0.4em; padding-bottom: 0.3em; padding-left: 0.4em; font-size: 12px; background-image: initial; background-attachment: initial; background-origin: initial; background-clip: initial; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(148, 218, 58); border-right-color: rgb(148, 218, 58); border-bottom-color: rgb(148, 218, 58); border-left-color: rgb(148, 218, 58); border-image: initial; border-top-width: 1px; border-right-width: 0px; border-bottom-width: 1px; border-left-width: 0px; overflow-x: hidden; overflow-y: hidden; width: 682px; font-family: Anonymous, Consolas, 'Courier New' !important; color: rgb(35, 79, 50); position: relative; line-height: 18px;"><span>urlpatterns </span><span>=</span><span> patterns</span><span>(</span><span>''</span><span>,</span><br><span>    </span><span>(</span><span>r</span><span>'^blog/'</span><span>,</span><span> include</span><span>(</span><span>'inner'</span><span>),</span><span> </span><span>{</span><span>'blogid'</span><span>:</span><span> </span><span>3</span><span>}),</span><br><span>)</span></pre></pre><span style="line-height: 24px;">这种技术仅当你确信在涉及到的接受到额外你给出的选项的每个URLconf时有用的才奏效。</span> </div>
                                                                                        </td>
                                                                                    </tr>
                                                                                </tbody>
                                                                            </table>
</body>
</html>